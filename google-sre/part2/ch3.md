# 第三章 拥抱风险

> SRE旨在寻求快速创新和高效的服务运营之间的风险的平衡，而不是简单地将服务在线时间最大化。这样我们可以优化用户的整体幸福感，平衡系统的功能、服务和性能

## 管理风险
在构建系统的过程中，可靠性进一步提升的成本并不是线性增加的--可靠性的下一个改进可能比之前的改进成本增加100倍，高昂的成本主要存在于以下两个维度:
- 冗余物理服务器/计算资源的成本
- 机会成本
在SRE团队中，我们管理服务的可靠性很大程度上是通过管理风险来进行的，把可用性目标看作风险的上限和下限，可以促使团队进行明确的、深思熟虑的风险讨论

## 度量服务的风险
Google的标准做法是通过一个客观的指标来体现一个待优化的系统属性。通过设立这样一个目标，我们可客观地评价目前的系统表现以及追踪一段时间内的改进和退步。
- 基于时间的可用性
    可用性=系统正常运行时间/(系统正常运行时间+停机时间)
    这个公式可以计算出一年内可接受的停机时间，从而可以使可用性达到预期目标
    Google所采用的故障隔离手段使得我们能够保证在任何时候、任何地方对于一个给定的服务，总是可以处理一定的用户流量。因此我们通过请求成功率来定义服务可用性
- 合计可用性
可用性=成功请求数/总的请求数
使用请求成功率指标量化计划外停机时间使得这种指标更适合在不直接服务终端用户的系统中使用
## 服务的风险容忍度
## 辨别消费者服务的风险容忍度
    - 需要的可用性水平是什么
    - 不同类型的失败对服务有不同影响吗
    - 我们如何使用服务成本来帮助在风险曲线上定位这个服务
    - 有哪些其他重要的服务指标需要考虑

## 可用性目标
对于某个Google服务而言，服务的可用性目标通常取决于它提供的功能，以及这项服务在市场上是如何定位的。一下是一些需要考虑的问题:
    - 用户期望的服务水平是什么
    - 这项服务是否直接关系到收入(我们的收入或我们的客户收入)
    - 这是一个有偿服务，还是免费服务
    - 如果市场上有竞争对手，那些竞争对手提供的服务水平如何
    - 这项服务是针对消费者还是企业的
## 故障的类型
## 成本
    决定一项服务的合理可用性目标时，成本是很重要的考虑因素
## 可用性目标水平
    Bigtable是一个大型结构化数据分布式存储系统，，一些面向消费者的服务数据直接通过它服务用户请求
## 故障类型
    成本
    低延迟集群
    高吞吐量集群

> 关键点
    - 管理服务的可靠性主要在于管理风险，而且管理风险的成本可能很高
    - 100%可能永远都不是一个正确的可靠性目标:不仅是不可能实现的，而且它通常比一项服务的用户期望的可靠性大得多
    - 错误预算在SRE和产品研发团队之间调整激励，同时强调共同责任。错误预算使得讨论发布速率更容易，同时可有效地减少任何关于事故饿讨论
